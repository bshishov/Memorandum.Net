{% extends 'node' %}

{% block node_content %}
    <h4 id="path">{{ Node.Path }}</h4>    
    <div class="card">
    {% block file_content %}{% endblock %}
    </div>
    <div class="row details">
        <div class="col col2-3 set"> 
			{% if Node.IsDirectory != true %}
            <span class="system">{{ Node.Size|filesizeformat }}</span>
            <span class="system tooltipped" data-tooltip="{{ Node.Mime }}">{{ Node.Mime|Truncate:20 }}</span>
			{% endif %}
			<span class="system">{{ Node.LastModified }}</span>       
        </div>
        <div class="col col1-3 set text-right">           
            <a class="system button small" href="/file/raw/{{Node.Path|Urlencode}}">Raw</a>
            <a class="system button small" href="/file/download/{{Node.Path|Urlencode}}">Download</a>
        </div> 
    </div>
    <script type="text/javascript">
        $(document).ready(function(){
            var path = $('#path').html();
            var parts = path.split('/');
            var res = "";
            var resPath = "";
            for (var i = 0; i < parts.length - 1; i++) {
                resPath = resPath + "/" + parts[i];
                res += "<a href='/file/" + resPath + "/'>" + parts[i] + "</a>/";
            };
            res += parts[parts.length - 1];
            $('#path').html(res);
        });
    </script>
{% endblock %}