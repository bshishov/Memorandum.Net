{% extends 'node' %}

{% block node_content %}
    <h4 id="path">{{ Node.Path }}</h4>    
    <div class="card">
    {% block file_content %}{% endblock %}
    </div>
    <div class="row">
        <div class="col m5 s12"> 
			{% if Node.IsDirectory != true %}
            <div class="chip">{{ Node.Size|filesizeformat }}</div>
            <div class="chip tooltipped" data-tooltip="{{ Node.Mime }}">{{ Node.Mime|Truncate:20 }}</div>
			{% endif %}
			<div class="chip">{{ Node.LastModified }}</div>       
        </div>
        <div class="col m7 s12 right-align">           
            <a class="waves-effect btn-flat" href="/file/raw/{{Node.Path|Urlencode}}"><i class="material-icons left">remove_red_eye</i> Raw</a>
            <a class="waves-effect btn-flat" href="/file/download/{{Node.Path|Urlencode}}"><i class="material-icons left">file_download</i> Download</a>
            <a class="waves-effect btn-flat" href="javascript://"><i class="material-icons left">delete</i> Delete</a>
        </div> 
    </div>
    <script type="text/javascript">
        $(document).ready(function(){
            var path = $('#path').html();
            var parts = path.split('/');
            var res = "";
            var resPath = "";
            for (var i = 0; i < parts.length - 1; i++) {
                resPath = resPath + "/" + parts[i];
                res += "<a href='/file/" + resPath + "/'>" + parts[i] + "</a>/";
            };
            res += parts[parts.length - 1];
            $('#path').html(res);
        });
    </script>
{% endblock %}